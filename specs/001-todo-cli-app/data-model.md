# Data Model: Todo In-Memory CLI Application

**Feature**: 001-todo-cli-app
**Date**: 2025-12-28
**Source**: spec.md Key Entities section

## Entities

### Task

The primary and only entity in Phase I.

| Field | Type | Required | Default | Constraints |
|-------|------|----------|---------|-------------|
| `id` | Integer | Yes | Auto-generated | Unique, immutable, auto-incremented, never reused |
| `title` | String | Yes | N/A | Non-empty |
| `description` | String | No | Empty string | Any text allowed |
| `completed` | Boolean | Yes | False | True/False only |

#### Field Details

**id (Integer)**
- Generated by centralized ID counter (FR-015)
- Starts at 1 for first task
- Increments by 1 for each new task
- NEVER changes after assignment (FR-011)
- NEVER reused after deletion (FR-003)
- Example sequence: Create 1, Create 2, Delete 2, Create 3 → IDs are 1, 3

**title (String)**
- User-provided task name
- Must be non-empty (FR-007)
- No length limit specified
- Special characters allowed (edge case in spec)

**description (String)**
- Optional additional details (FR-008)
- Can be empty string
- No length limit specified

**completed (Boolean)**
- Tracks task completion status
- Defaults to False on creation
- Toggled via Mark Complete/Incomplete feature

## Storage Structure

### In-Memory Representation

```python
# TaskManager maintains:
tasks: List[Dict] = []  # List of task dictionaries
next_id: int = 1        # Counter for ID generation

# Each task dictionary:
{
    "id": 1,
    "title": "Buy groceries",
    "description": "Milk, eggs, bread",
    "completed": False
}
```

### State Transitions

```
                    ┌─────────────────┐
                    │   Task Created  │
                    │  completed=False│
                    └────────┬────────┘
                             │
              ┌──────────────┼──────────────┐
              │              │              │
              ▼              ▼              ▼
        ┌─────────┐   ┌───────────┐   ┌─────────┐
        │ Updated │   │  Toggled  │   │ Deleted │
        │(title/  │   │ Complete/ │   │(removed)│
        │ desc)   │   │ Incomplete│   └─────────┘
        └────┬────┘   └─────┬─────┘
             │              │
             └──────┬───────┘
                    │
                    ▼
              ┌───────────┐
              │Task Exists│
              │(in memory)│
              └───────────┘
```

## Validation Rules

| Field | Validation | Error Message |
|-------|------------|---------------|
| title | Cannot be empty/whitespace | "Title cannot be empty" |
| id (input) | Must be positive integer | "Invalid ID" |
| id (input) | Must exist in task list | "Task not found" |

## ID Management Rules (Critical)

Per spec section 3.1:

1. **Uniqueness**: Each task ID is unique within the session
2. **Immutability**: ID never changes after assignment
3. **Permanence**: ID belongs to task until deletion
4. **No Reuse**: Deleted IDs are never reassigned
5. **Sequential**: New tasks always get `next_id`, then `next_id++`

### Example Scenario

| Action | Task List | Next ID |
|--------|-----------|---------|
| Initial | [] | 1 |
| Add "Task A" | [{id:1, title:"Task A"}] | 2 |
| Add "Task B" | [{id:1}, {id:2}] | 3 |
| Delete id=1 | [{id:2}] | 3 |
| Add "Task C" | [{id:2}, {id:3}] | 4 |

Note: ID 1 is never reused even though it was deleted.

## Relationships

None - Task is the only entity in Phase I.

## Future Considerations (Phase II+)

Not implemented in Phase I:
- Categories/tags
- Due dates
- Priority levels
- User ownership
- Persistence to file/database
